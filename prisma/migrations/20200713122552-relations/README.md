# Migration `20200713122552-relations`

This migration has been generated by ivanms1 at 7/13/2020, 12:25:52 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Project" DROP COLUMN "author",
ADD COLUMN "authorId" integer  NOT NULL ;

ALTER TABLE "public"."Project" ADD FOREIGN KEY ("authorId")REFERENCES "public"."User"("id") ON DELETE CASCADE  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200710104941-first..20200713122552-relations
--- datamodel.dml
+++ datamodel.dml
@@ -1,32 +1,33 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator prisma_client {
   provider = "prisma-client-js"
 }
 model User {
-  id       Int     @id @default(autoincrement())
+  id       Int       @id @default(autoincrement())
   name     String
   lastName String
   password String
   email    String
   role     String
   github   String?
   discord  String?
-
+  Project  Project[]
 }
 model Project {
   id          Int     @id @default(autoincrement())
   title       String
   preview     String
   repoLink    String
   siteLink    String
-  author      String
+  author      User    @relation(fields: [authorId], references: [id])
+  authorId    Int
   description String
   likes       Int     @default(0)
   isApproved  Boolean @default(false)
 }
```


